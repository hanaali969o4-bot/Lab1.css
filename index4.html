<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Promises Examples</title>
</head>
<body>
  <h1>Promise Basics:</h1>
  <p id="promise-basics">Waiting...</p>

  <h1>Promise Chaining:</h1>
  <p id="promise-chaining">Waiting...</p>

  <h1>Error Handling:</h1>
  <p id="error-handling">Waiting...</p>

  <h1>Fetch API + Promises (.then()):</h1>
  <p id="fetch-then">Loading...</p>

  <h1>Fetch API + Async/Await:</h1>
  <p id="fetch-async">Loading...</p>

  <h1>Parallel Promises:</h1>
  <p id="parallel1">Loading product 1...</p>
  <p id="parallel2">Loading product 2...</p>

  <script>
    // -------------------------------
    //  Promise Basics
    // -------------------------------
    const helloPromise = new Promise((resolve) => {
      setTimeout(() => {
        resolve("Hello, World!");
      }, 2000);
    });

    helloPromise.then(message => {
      document.getElementById("promise-basics").textContent = message;
      console.log("✅ Promise Basics: " + message);
    });

    // -------------------------------
    // Promise Chaining
    // -------------------------------
    const numberPromise = Promise.resolve(5);

    numberPromise
      .then(num => {
        console.log("➡️ Chaining Step 1: " + num + " * 2 = " + (num * 2));
        return num * 2;
      })
      .then(num => {
        console.log("➡️ Chaining Step 2: " + num + " - 3 = " + (num - 3));
        return num - 3;
      })
      .then(result => {
        document.getElementById("promise-chaining").textContent = "Final Result: " + result;
        console.log("✅ Final Chaining Result: " + result);
      });

    // -------------------------------
    //  Error Handling
    // -------------------------------
    const errorPromise = Promise.reject("Something went wrong!");

    errorPromise.catch(err => {
      document.getElementById("error-handling").textContent = err;
      console.error("❌ Error Handling: " + err);
    });

    // -------------------------------
    //  Fetch API + Promises (.then())
    // -------------------------------
    fetch("https://dummyjson.com/products/1")
      .then(res => res.json())
      .then(data => {
        document.getElementById("fetch-then").textContent = data.title;
        console.log("✅ Fetch .then(): " + data.title);
      })
      .catch(err => {
        document.getElementById("fetch-then").textContent = "Failed to load product";
        console.error("❌ Fetch .then() Error:", err);
      });

    // -------------------------------
    //  Fetch API + Async/Await
    // -------------------------------
    async function fetchProductAsync() {
      try {
        const response = await fetch("https://dummyjson.com/products/2");
        const data = await response.json();
        document.getElementById("fetch-async").textContent = data.title;
        console.log("✅ Async/Await: " + data.title);
      } catch (err) {
        document.getElementById("fetch-async").textContent = "Failed to load product";
        console.error("❌ Async/Await Error:", err);
      }
    }
    fetchProductAsync();

    // -------------------------------
    // Parallel Promises
    // -------------------------------
    const product1Url = "https://dummyjson.com/products/1";
    const product2Url = "https://dummyjson.com/products/2";

    Promise.all([
      fetch(product1Url).then(res => res.json()),
      fetch(product2Url).then(res => res.json())
    ])
    .then(products => {
      document.getElementById("parallel1").textContent = "Product 1: " + products[0].title;
      document.getElementById("parallel2").textContent = "Product 2: " + products[1].title;
      console.log("✅ Parallel Promises: Loaded both products successfully!");
      console.log("   - Product 1: " + products[0].title);
      console.log("   - Product 2: " + products[1].title);
    })
    .catch(err => {
      document.getElementById("parallel1").textContent = "Failed to load product 1";
      document.getElementById("parallel2").textContent = "Failed to load product 2";
      console.error("❌ Parallel Promises Error:", err);
    });
  </script>
</body>
</html>